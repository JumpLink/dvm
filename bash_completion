#!/usr/bin/env bash

_dvm_completion() {
  local cur
  local prev
  local opts

  COMPREPLY=()
  cur="${COMP_WORDS[COMP_CWORD]}"
  prev="${COMP_WORDS[COMP_CWORD-1]}"
  
  if [ "$1" == "$prev" ]
  then
    if [[ ${cur} == -* ]]
    then
      opts="--help --version -h"
    elif [[ ${cur} == * ]]
    then
      opts="alias clean current help install list list-remote
        ls ls-remote run unalias uninstall use which"
    fi
  fi

  # shellcheck disable=SC2207
  COMPREPLY=( $(compgen -W "${opts}" -- "${cur}") )
}

complete -F _dvm_completion dvm
